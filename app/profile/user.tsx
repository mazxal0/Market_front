import {Button, Divider, Group,Text, Loader, Paper, Stack, TextInput, Title, PasswordInput } from "@mantine/core";
import {ChangeUser, User} from "@/types";
import {fetchProfile, updateProfile} from "@/api/profile";
import { useEffect } from "react";
import { useForm } from "@mantine/form";
import { useQuery } from "@tanstack/react-query";
import { Pencil, X } from "lucide-react";
import { useRouter, useSearchParams } from "next/navigation";

export default function UserProfile() {
  const { data: user, isLoading, error, refetch } = useQuery<User>({
    queryKey: ['userProfile'],
    queryFn: fetchProfile,
  });

  const router = useRouter()
  const searchParams = useSearchParams();

  const isEdit = searchParams.get('edit') === 'true';

  const form = useForm<User>({
    initialValues: {
      Name: '',
      Surname: '',
      LastName: '',
      Number: '',
      Email: '',
      Password: '',
    },
    validate: {
      Email: (value: string) => (/^\S+@\S+$/.test(value) ? null : 'Неверный email'),
      Password: (value: string) => (value.length >= 6 ? null : 'Минимум 6 символов'),
    },
  });

  useEffect(() => {
    if (user) {
      form.setValues(user);
    }
  }, [user]);

  const handleSaveUserChange = async () => {
    try {
      // Здесь собираем данные, которые пользователь изменил
      const updatedData: Partial<ChangeUser> = {
        Name: form.values.Name,
        Surname: form.values.Surname,
        LastName: form.values.LastName,
        Number: form.values.Number,
      };

      // Вызываем API
      await updateProfile(updatedData);
      await refetch()
      router.replace('?tab=user', {scroll: false});
      // Обновляем состояние локально (например, в React state)

    } catch (error) {
      console.error('Ошибка при обновлении профиля:', error);
    }
  };

  return (
    <>
      <Group mt={45} w={625} justify={'space-between'}>
        <Stack gap={0}>
          <Title c={'black'} fz={32} fw={500} order={2}>Личные данные</Title>
          <Group gap={5}>
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5.86141 0.044551C5.81108 0.0653086 5.7489 0.12165 5.72522 0.169096C5.70153 0.213576 5.55941 0.68507 5.40841 1.21587C5.25741 1.74667 5.08273 2.30713 5.01759 2.46133C4.56163 3.5852 3.59938 4.54894 2.47429 5.00858C2.32033 5.07085 1.74002 5.25174 1.18043 5.41187C0.102715 5.72026 0.0464602 5.74695 0.00500947 5.93081C-0.0216375 6.05239 0.0612641 6.21252 0.176734 6.26589C0.230028 6.28962 0.703751 6.43195 1.23373 6.58319C1.76371 6.73442 2.32033 6.90938 2.47429 6.97165C3.60234 7.43425 4.55867 8.39206 5.01759 9.5189C5.08273 9.6731 5.25741 10.2336 5.40841 10.7644C5.55941 11.2952 5.70153 11.7696 5.72522 11.823C5.77851 11.9386 5.93839 12.0217 6.05978 11.995C6.24335 11.9535 6.27 11.8971 6.57792 10.8177C6.88584 9.73537 7.01019 9.38842 7.23521 8.99403C7.70597 8.16966 8.48169 7.45204 9.31663 7.06358C9.63047 6.91827 9.89102 6.83228 10.9243 6.53871C11.8895 6.26293 11.9547 6.23327 11.9961 6.04942C12.0169 5.9486 11.9517 5.7855 11.8659 5.73213C11.8333 5.71137 11.3832 5.57496 10.8651 5.42669C9.59494 5.06195 9.35216 4.97003 8.90212 4.69425C8.02573 4.15159 7.35068 3.36576 6.98058 2.45836C6.91841 2.30416 6.74372 1.74667 6.59272 1.21587C6.44172 0.68507 6.2996 0.213576 6.27592 0.169096C6.23743 0.0890308 6.08051 -0.00289545 5.99465 6.99136e-05C5.97392 0.00303528 5.91471 0.020828 5.86141 0.044551Z" fill="#7B7B7B"/>
              <path d="M9.96407 0.455995C9.95102 0.461377 9.9349 0.475984 9.92876 0.488284C9.92262 0.499816 9.88577 0.622056 9.84663 0.759671C9.80748 0.897286 9.76219 1.04259 9.7453 1.08257C9.62709 1.37394 9.37762 1.6238 9.08593 1.74296C9.04601 1.75911 8.89556 1.80601 8.75048 1.84752C8.47108 1.92748 8.45649 1.9344 8.44574 1.98206C8.43884 2.01358 8.46033 2.0551 8.49026 2.06894C8.50408 2.07509 8.6269 2.11199 8.7643 2.1512C8.9017 2.19041 9.04601 2.23576 9.08593 2.25191C9.37839 2.37184 9.62632 2.62016 9.7453 2.91231C9.76219 2.95229 9.80748 3.09759 9.84663 3.2352C9.88577 3.37282 9.92262 3.49583 9.92876 3.50966C9.94258 3.53965 9.98403 3.56117 10.0155 3.55426C10.0631 3.54349 10.07 3.52888 10.1498 3.24904C10.2297 2.96843 10.2619 2.87848 10.3202 2.77623C10.4423 2.5625 10.6434 2.37646 10.8599 2.27574C10.9412 2.23807 11.0088 2.21578 11.2767 2.13966C11.5269 2.06817 11.5438 2.06048 11.5546 2.01281C11.5599 1.98667 11.543 1.94439 11.5208 1.93055C11.5123 1.92517 11.3957 1.88981 11.2613 1.85137C10.932 1.7568 10.8691 1.73297 10.7524 1.66147C10.5252 1.52078 10.3502 1.31705 10.2542 1.0818C10.2381 1.04182 10.1928 0.897286 10.1537 0.759671C10.1145 0.622056 10.0777 0.499816 10.0715 0.488284C10.0616 0.467527 10.0209 0.443694 9.99861 0.444463C9.99324 0.445232 9.97789 0.449845 9.96407 0.455995Z" fill="#7B7B7B"/>
              <path d="M1.42135 7.34076C1.41296 7.34422 1.40259 7.35361 1.39865 7.36152C1.3947 7.36893 1.37101 7.44751 1.34585 7.53598C1.32068 7.62445 1.29157 7.71785 1.28071 7.74356C1.20472 7.93087 1.04434 8.09149 0.856826 8.1681C0.831166 8.17848 0.734448 8.20862 0.641184 8.23531C0.461564 8.28671 0.452188 8.29116 0.445279 8.3218C0.440838 8.34206 0.454655 8.36875 0.4739 8.37765C0.482782 8.3816 0.561736 8.40533 0.650066 8.43053C0.738396 8.45574 0.831166 8.4849 0.856826 8.49528C1.04484 8.57238 1.20422 8.73201 1.28071 8.91982C1.29157 8.94552 1.32068 9.03893 1.34585 9.12739C1.37101 9.21586 1.3947 9.29494 1.39865 9.30383C1.40753 9.32311 1.43418 9.33695 1.45441 9.3325C1.485 9.32558 1.48944 9.31619 1.54076 9.13629C1.59208 8.9559 1.61281 8.89807 1.65031 8.83234C1.72877 8.69494 1.85806 8.57534 1.99722 8.5106C2.04952 8.48638 2.09295 8.47205 2.26517 8.42312C2.42603 8.37715 2.43689 8.37221 2.4438 8.34157C2.44725 8.32477 2.4364 8.29758 2.42209 8.28869C2.41666 8.28523 2.34165 8.26249 2.2553 8.23778C2.0436 8.17699 2.00314 8.16167 1.92813 8.11571C1.78207 8.02526 1.66956 7.89429 1.60787 7.74306C1.59751 7.71736 1.5684 7.62445 1.54323 7.53598C1.51806 7.44751 1.49438 7.36893 1.49043 7.36152C1.48402 7.34817 1.45786 7.33285 1.44355 7.33335C1.4401 7.33384 1.43023 7.3368 1.42135 7.34076Z" fill="#7B7B7B"/>
            </svg>
            <Text fz={12} c={'#7B7B7B'}>Управляйте личным профилем</Text>
          </Group>
        </Stack>
        {!isEdit && <Button
          disabled={isEdit}
          onClick={() => {
            router.push('?tab=user&edit=true');
          }}
          leftSection={<Pencil width={14} height={14}/>}
          c={'#fff'}
          fz={12}
          fw={500}
          bg={'#141414'}
          px={20}
          py={8}
          radius={8}
        >
          Редактировать
        </Button>}
      </Group>
      {!isLoading && user ?
        <Paper bg={'transparent'} w={625} mt={10} withBorder p={10} styles={{
          root: {
            border: "2px solid #141414",
            borderRadius: 16
          }
        }}>
          <Stack>
            <Stack gap={0}>
              <Text c={'#262626'} fz={18} fw={700}>{user.Name} {user.Surname}</Text>
              <Text c={'#7B7B7B'} fz={12}>Клиент LESH</Text>
              <Divider/>
            </Stack>
            <Stack gap={10}>
              <Group gap={10}>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fillRule="evenodd" clipRule="evenodd" d="M1.875 1.25C1.70924 1.25 1.55027 1.31585 1.43306 1.43306C1.31585 1.55027 1.25 1.70924 1.25 1.875V5.625C1.25 5.79076 1.18415 5.94973 1.06694 6.06694C0.949732 6.18415 0.79076 6.25 0.625 6.25C0.45924 6.25 0.300269 6.18415 0.183058 6.06694C0.065848 5.94973 0 5.79076 0 5.625V1.875C0 1.37772 0.197544 0.900805 0.549175 0.549175C0.900805 0.197544 1.37772 0 1.875 0H5.625C5.79076 0 5.94973 0.065848 6.06694 0.183058C6.18415 0.300269 6.25 0.45924 6.25 0.625C6.25 0.79076 6.18415 0.949732 6.06694 1.06694C5.94973 1.18415 5.79076 1.25 5.625 1.25H1.875ZM13.75 0.625C13.75 0.45924 13.8158 0.300269 13.9331 0.183058C14.0503 0.065848 14.2092 0 14.375 0H18.125C18.6223 0 19.0992 0.197544 19.4508 0.549175C19.8025 0.900805 20 1.37772 20 1.875V5.625C20 5.79076 19.9342 5.94973 19.8169 6.06694C19.6997 6.18415 19.5408 6.25 19.375 6.25C19.2092 6.25 19.0503 6.18415 18.9331 6.06694C18.8158 5.94973 18.75 5.79076 18.75 5.625V1.875C18.75 1.70924 18.6842 1.55027 18.5669 1.43306C18.4497 1.31585 18.2908 1.25 18.125 1.25H14.375C14.2092 1.25 14.0503 1.18415 13.9331 1.06694C13.8158 0.949732 13.75 0.79076 13.75 0.625ZM0.625 13.75C0.79076 13.75 0.949732 13.8158 1.06694 13.9331C1.18415 14.0503 1.25 14.2092 1.25 14.375V18.125C1.25 18.2908 1.31585 18.4497 1.43306 18.5669C1.55027 18.6842 1.70924 18.75 1.875 18.75H5.625C5.79076 18.75 5.94973 18.8158 6.06694 18.9331C6.18415 19.0503 6.25 19.2092 6.25 19.375C6.25 19.5408 6.18415 19.6997 6.06694 19.8169C5.94973 19.9342 5.79076 20 5.625 20H1.875C1.37772 20 0.900805 19.8025 0.549175 19.4508C0.197544 19.0992 0 18.6223 0 18.125V14.375C0 14.2092 0.065848 14.0503 0.183058 13.9331C0.300269 13.8158 0.45924 13.75 0.625 13.75ZM19.375 13.75C19.5408 13.75 19.6997 13.8158 19.8169 13.9331C19.9342 14.0503 20 14.2092 20 14.375V18.125C20 18.6223 19.8025 19.0992 19.4508 19.4508C19.0992 19.8025 18.6223 20 18.125 20H14.375C14.2092 20 14.0503 19.9342 13.9331 19.8169C13.8158 19.6997 13.75 19.5408 13.75 19.375C13.75 19.2092 13.8158 19.0503 13.9331 18.9331C14.0503 18.8158 14.2092 18.75 14.375 18.75H18.125C18.2908 18.75 18.4497 18.6842 18.5669 18.5669C18.6842 18.4497 18.75 18.2908 18.75 18.125V14.375C18.75 14.2092 18.8158 14.0503 18.9331 13.9331C19.0503 13.8158 19.2092 13.75 19.375 13.75Z" fill="#7B7B7B"/>
                  <path fillRule="evenodd" clipRule="evenodd" d="M3.75 17.5C3.75 17.5 2.5 17.5 2.5 16.25C2.5 15 3.75 11.25 10 11.25C16.25 11.25 17.5 15 17.5 16.25C17.5 17.5 16.25 17.5 16.25 17.5H3.75ZM10 10C10.9946 10 11.9484 9.60491 12.6517 8.90165C13.3549 8.19839 13.75 7.24456 13.75 6.25C13.75 5.25544 13.3549 4.30161 12.6517 3.59835C11.9484 2.89509 10.9946 2.5 10 2.5C9.00544 2.5 8.05161 2.89509 7.34835 3.59835C6.64509 4.30161 6.25 5.25544 6.25 6.25C6.25 7.24456 6.64509 8.19839 7.34835 8.90165C8.05161 9.60491 9.00544 10 10 10Z" fill="#7B7B7B"/>
                </svg>
                <Title c={'#7B7B7B'} order={4}>Персональные данные</Title>
              </Group>
              <Group>
                <TextInput
                  {...form.getInputProps('Surname')}
                  w={180} disabled={!isEdit}
                  c={'#262626'}
                  label={'Фамилия'}
                  radius={6}
                  styles={{ input: { backgroundColor: 'transparent', color: '#858585' } }}
                />
                <TextInput
                  {...form.getInputProps('Name')}
                  w={180} disabled={!isEdit}
                  c={'#262626'}
                  label={'Имя'}
                  radius={6}
                  styles={{ input: { backgroundColor: 'transparent', color: '#858585' } }}
                />
                <TextInput
                  {...form.getInputProps('LastName')}
                  w={180} disabled={!isEdit}
                  c={'#262626'}
                  label={'Отчество'}
                  radius={6}
                  styles={{ input: { backgroundColor: 'transparent', color: '#858585' } }}
                />
              </Group>
              <Divider/>
            </Stack>

            <Stack gap={10}>
              <Group gap={10}>
                <svg width="23" height="17" viewBox="0 0 23 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fillRule="evenodd" clipRule="evenodd"
                        d="M0 2.83333C0 2.08189 0.302901 1.36122 0.842068 0.829864C1.38124 0.298511 2.1125 0 2.875 0H20.125C20.8875 0 21.6188 0.298511 22.1579 0.829864C22.6971 1.36122 23 2.08189 23 2.83333V14.1667C23 14.9181 22.6971 15.6388 22.1579 16.1701C21.6188 16.7015 20.8875 17 20.125 17H2.875C2.1125 17 1.38124 16.7015 0.842068 16.1701C0.302901 15.6388 0 14.9181 0 14.1667V2.83333ZM2.875 1.41667C2.49375 1.41667 2.12812 1.56592 1.85853 1.8316C1.58895 2.09728 1.4375 2.45761 1.4375 2.83333V3.14075L11.5 9.09075L21.5625 3.14075V2.83333C21.5625 2.45761 21.411 2.09728 21.1415 1.8316C20.8719 1.56592 20.5062 1.41667 20.125 1.41667H2.875ZM21.5625 4.79258L14.7229 8.83717L21.5625 12.9115V4.794V4.79258ZM21.5136 14.5364L13.3271 9.66167L11.5 10.7426L9.6715 9.66167L1.48638 14.535C1.5686 14.8359 1.74922 15.1018 2.00026 15.2913C2.25131 15.4808 2.55876 15.5835 2.875 15.5833H20.125C20.441 15.5835 20.7484 15.4811 20.9994 15.2918C21.2504 15.1026 21.4311 14.8371 21.5136 14.5364ZM1.4375 12.9115L8.27712 8.83717L1.4375 4.79258V12.9101V12.9115Z"
                        fill="#7B7B7B"/>
                </svg>
                <Title c={'#7B7B7B'} order={4}>Контактная информация</Title>
              </Group>
              <Group>
                <TextInput
                  type={'email'}
                  {...form.getInputProps('Email')}
                  w={280}
                  disabled={true}
                  c={'#262626'}
                  label={'E-mail'}
                  radius={6}
                  styles={{ input: { backgroundColor: 'transparent', color: '#858585' } }}
                />
                <TextInput
                  type={'number'}
                  {...form.getInputProps('Number')}
                  w={280}
                  disabled={!isEdit}
                  c={'#262626'}
                  label={'Телефон'}
                  radius={6}
                  styles={{ input: { backgroundColor: 'transparent', color: '#858585' } }}
                />
              </Group>
              <Divider/>
            </Stack>

            <Stack gap={10}>
              <Group gap={10}>
                <svg width="15" height="18" viewBox="0 0 15 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fillRule="evenodd" clipRule="evenodd"
                        d="M11.5364 7.37045H2.56364C2.22368 7.37045 1.89764 7.5055 1.65725 7.74589C1.41687 7.98628 1.28182 8.31231 1.28182 8.65227V15.0614C1.28182 15.4013 1.41687 15.7274 1.65725 15.9677C1.89764 16.2081 2.22368 16.3432 2.56364 16.3432H11.5364C11.8763 16.3432 12.2024 16.2081 12.4427 15.9677C12.6831 15.7274 12.8182 15.4013 12.8182 15.0614V8.65227C12.8182 8.31231 12.6831 7.98628 12.4427 7.74589C12.2024 7.5055 11.8763 7.37045 11.5364 7.37045ZM2.56364 6.08864C1.88372 6.08864 1.23165 6.35873 0.750872 6.83951C0.270096 7.32028 0 7.97235 0 8.65227V15.0614C0 15.7413 0.270096 16.3934 0.750872 16.8741C1.23165 17.3549 1.88372 17.625 2.56364 17.625H11.5364C12.2163 17.625 12.8684 17.3549 13.3491 16.8741C13.8299 16.3934 14.1 15.7413 14.1 15.0614V8.65227C14.1 7.97235 13.8299 7.32028 13.3491 6.83951C12.8684 6.35873 12.2163 6.08864 11.5364 6.08864H2.56364ZM2.56364 4.48636C2.56364 3.29651 3.03631 2.15538 3.87766 1.31403C4.71902 0.472669 5.86014 0 7.05 0C8.23986 0 9.38098 0.472669 10.2223 1.31403C11.0637 2.15538 11.5364 3.29651 11.5364 4.48636V6.08864H10.2545V4.48636C10.2545 3.63647 9.91692 2.82138 9.31596 2.22041C8.71499 1.61944 7.8999 1.28182 7.05 1.28182C6.2001 1.28182 5.38501 1.61944 4.78404 2.22041C4.18307 2.82138 3.84545 3.63647 3.84545 4.48636V6.08864H2.56364V4.48636Z"
                        fill="#7B7B7B"/>
                </svg>
                <Title c={'#7B7B7B'} order={4}>Безопасность</Title>
              </Group>
              <Group>
                <PasswordInput
                  type={'email'}
                  {...form.getInputProps('Password')}
                  w={580}
                  disabled={!isEdit}
                  c={'#262626'}
                  label={'Пароль'}
                  radius={6}
                  styles={{
                    input: { backgroundColor: 'transparent', color: '#858585' },
                    visibilityToggle: {
                      color: 'black',
                      '&:hover': { color: 'darkgray' },
                    },
                  }}
                />
              </Group>
            </Stack>
            {isEdit &&<Group>
              <Button
                leftSection={
                  <svg width="15" height="15" viewBox="0 0 15 15" fill="none"
                       xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M0.23265 0.598898C0.163574 0.840666 0.129036 4.05271 0.163574 7.7483L0.267188 14.4832H14.4278L14.6351 3.12018L13.1499 1.63504L11.6993 0.149902H6.0696C1.78687 0.149902 0.370803 0.253517 0.23265 0.598898ZM3.03024 5.8487H11.3194L11.5266 1.08243L13.9098 3.39649V13.9652H11.872L11.6648 7.92099H3.03024L2.82301 13.9652H0.785261V0.840666H2.82301L3.03024 5.8487ZM10.8013 5.33063H3.54831V0.840666H10.8013V5.33063ZM11.1467 13.9652H3.54831V8.43906H11.1467V13.9652Z"
                      fill="#EEEEEE"/>
                    <path
                      d="M1.47602 12.929C1.47602 13.1017 1.64871 13.2744 1.82141 13.2744C2.02863 13.2744 2.16679 13.1017 2.16679 12.929C2.16679 12.7218 2.02863 12.5836 1.82141 12.5836C1.64871 12.5836 1.47602 12.7218 1.47602 12.929Z"
                      fill="#EEEEEE"/>
                    <path
                      d="M12.5282 12.929C12.5282 13.1017 12.7009 13.2744 12.8736 13.2744C13.0808 13.2744 13.219 13.1017 13.219 12.929C13.219 12.7218 13.0808 12.5836 12.8736 12.5836C12.7009 12.5836 12.5282 12.7218 12.5282 12.929Z"
                      fill="#EEEEEE"/>
                    <path
                      d="M8.38366 3.08565C8.38366 4.50171 8.45273 4.63986 9.24711 4.63986C10.0415 4.63986 10.1106 4.50171 10.1106 3.08565C10.1106 1.66958 10.0415 1.53143 9.24711 1.53143C8.45273 1.53143 8.38366 1.66958 8.38366 3.08565ZM9.31619 3.5001C9.21257 3.84549 9.1435 3.63826 9.1435 3.08565C9.1435 2.4985 9.21257 2.25673 9.31619 2.46396C9.38526 2.70573 9.38526 3.18926 9.31619 3.5001Z"
                      fill="#EEEEEE"/>
                    <path
                      d="M0.23265 0.598898C0.163574 0.840666 0.129036 4.05271 0.163574 7.7483L0.267188 14.4832H14.4278L14.6351 3.12018L13.1499 1.63504L11.6993 0.149902H6.0696C1.78687 0.149902 0.370803 0.253517 0.23265 0.598898ZM3.03024 5.8487H11.3194L11.5266 1.08243L13.9098 3.39649V13.9652H11.872L11.6648 7.92099H3.03024L2.82301 13.9652H0.785261V0.840666H2.82301L3.03024 5.8487ZM10.8013 5.33063H3.54831V0.840666H10.8013V5.33063ZM11.1467 13.9652H3.54831V8.43906H11.1467V13.9652Z"
                      stroke="#EEEEEE" strokeWidth="0.3"/>
                    <path
                      d="M1.47602 12.929C1.47602 13.1017 1.64871 13.2744 1.82141 13.2744C2.02863 13.2744 2.16679 13.1017 2.16679 12.929C2.16679 12.7218 2.02863 12.5836 1.82141 12.5836C1.64871 12.5836 1.47602 12.7218 1.47602 12.929Z"
                      stroke="#EEEEEE" strokeWidth="0.3"/>
                    <path
                      d="M12.5282 12.929C12.5282 13.1017 12.7009 13.2744 12.8736 13.2744C13.0808 13.2744 13.219 13.1017 13.219 12.929C13.219 12.7218 13.0808 12.5836 12.8736 12.5836C12.7009 12.5836 12.5282 12.7218 12.5282 12.929Z"
                      stroke="#EEEEEE" strokeWidth="0.3"/>
                    <path
                      d="M8.38366 3.08565C8.38366 4.50171 8.45273 4.63986 9.24711 4.63986C10.0415 4.63986 10.1106 4.50171 10.1106 3.08565C10.1106 1.66958 10.0415 1.53143 9.24711 1.53143C8.45273 1.53143 8.38366 1.66958 8.38366 3.08565ZM9.31619 3.5001C9.21257 3.84549 9.1435 3.63826 9.1435 3.08565C9.1435 2.4985 9.21257 2.25673 9.31619 2.46396C9.38526 2.70573 9.38526 3.18926 9.31619 3.5001Z"
                      stroke="#EEEEEE" strokeWidth="0.3"/>
                  </svg>}
                w={285}
                c={'#EEEEEE'}
                radius={8}
                styles={{
                  root: {
                    backgroundColor: '#141414',
                  }
                }}
                onClick={handleSaveUserChange}
              >
                Сохранить
              </Button>
              <Button
                leftSection={<X
                  size={18}
                  color={'#262626'}
                />}
                w={285}
                c={'#141414'}
                radius={8}
                styles={{
                  root: {
                    backgroundColor: 'transparent',
                    border: '1px solid #141414',
                  }
                }}

                onClick={() => {
                  router.push('?tab=user');
                }}
              >
                Отмена
              </Button>
            </Group>}
          </Stack>
        </Paper>
        : (
          error ?
            <Text c={'red'}>
              {error.message}
            </Text>
            :
            <Loader mt={150}/>
        )}
    </>
      )
}
